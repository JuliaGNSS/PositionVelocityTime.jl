BitIntegers.@define_integers 288
BitIntegers.@define_integers 320
@testset "PVT Galileo E1B with frequency offset of $freq_offset" for freq_offset in (0.0Hz, 500Hz, -1000Hz)
    galileo_e1b = GalileoE1B()
    states = [
        SatelliteState(;
            decoder = GNSSDecoderState(
                2,
                uint288"0x4001ec23bff8485200005ec5ff7a895805f4d37fe877968040ae99fffd20b00d205dcf80",
                uint288"0xd2a6aec5828003d8477ff090a40000bd8bfef512b00be9a6ffd0ef2d00815d33fffa4160",
                GNSSDecoder.GalileoE1BData(
                    1136,
                    132769,
                    132000.0,
                    1.885093958164237,
                    0.0002336719771847129,
                    5440.601516723633,
                    0.43151849653459906,
                    0.9782668574498574,
                    0.18081747042485646,
                    -3.6965825489294766e-10,
                    -5.353794435599309e-9,
                    3.053341469642328e-9,
                    1.9334256649017334e-6,
                    8.616596460342407e-6,
                    163.65625,
                    40.46875,
                    -4.284083843231201e-8,
                    7.264316082000732e-8,
                    132000.0,
                    0.00022286397870630026,
                    2.5721647034515627e-12,
                    0.0,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    5,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.navigation_data_valid,
                    GNSSDecoder.navigation_data_valid,
                    -1.6298145055770874e-9,
                    -2.0954757928848267e-9,
                ),
                GNSSDecoder.GalileoE1BData(
                    1136,
                    132769,
                    132000.0,
                    1.885093958164237,
                    0.0002336719771847129,
                    5440.601516723633,
                    0.43151849653459906,
                    0.9782668574498574,
                    0.18081747042485646,
                    -3.6965825489294766e-10,
                    -5.353794435599309e-9,
                    3.053341469642328e-9,
                    1.9334256649017334e-6,
                    8.616596460342407e-6,
                    163.65625,
                    40.46875,
                    -4.284083843231201e-8,
                    7.264316082000732e-8,
                    132000.0,
                    0.00022286397870630026,
                    2.5721647034515627e-12,
                    0.0,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    5,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.navigation_data_valid,
                    GNSSDecoder.navigation_data_valid,
                    -1.6298145055770874e-9,
                    -2.0954757928848267e-9,
                ),
                GNSSDecoder.GalileoE1BConstants(
                    250,
                    0x0160,
                    10,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986004418e14,
                    -4.442807309e-10,
                ),
                GNSSDecoder.GalileoE1BCache(0x00000c5cffc5722165040e1212147505),
                49,
                1549,
                false,
            ),
            system = galileo_e1b,
            carrier_doppler = 1617.3312825078192Hz + freq_offset,
            code_phase = 2216.5793761534956,
            carrier_phase = -1.461823180908076,
        ),
        SatelliteState(;
            decoder = GNSSDecoderState(
                4,
                uint288"0xc3ffc21fe800f025ffffeba64010c2fcff43fd5002fd6eaff7f228c000c1e9fe5bc6460f",
                uint288"0xd158f0c583c003de017ff0fda00001459bfef3d0300bc02affd029150080dd73fff3e160",
                GNSSDecoder.GalileoE1BData(
                    1136,
                    132769,
                    128400.0,
                    1.1883716376830096,
                    0.0003440612927079201,
                    5440.625782012939,
                    -1.666444269041331,
                    0.9544851798532423,
                    -1.401875745066068,
                    4.318037006430664e-10,
                    -5.442726711414135e-9,
                    3.016554223020131e-9,
                    -2.2649765014648438e-6,
                    9.763985872268677e-6,
                    128.46875,
                    -51.40625,
                    5.029141902923584e-8,
                    -2.2351741790771484e-8,
                    128400.0,
                    -0.0007824758649803698,
                    -8.01492205937393e-12,
                    0.0,
                    0x0000000000000056,
                    0x0000000000000056,
                    0x0000000000000056,
                    0x0000000000000056,
                    5,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.navigation_data_valid,
                    GNSSDecoder.navigation_data_valid,
                    -3.026798367500305e-9,
                    -3.4924596548080444e-9,
                ),
                GNSSDecoder.GalileoE1BData(
                    1136,
                    132769,
                    128400.0,
                    1.1883716376830096,
                    0.0003440612927079201,
                    5440.625782012939,
                    -1.666444269041331,
                    0.9544851798532423,
                    -1.401875745066068,
                    4.318037006430664e-10,
                    -5.442726711414135e-9,
                    3.016554223020131e-9,
                    -2.2649765014648438e-6,
                    9.763985872268677e-6,
                    128.46875,
                    -51.40625,
                    5.029141902923584e-8,
                    -2.2351741790771484e-8,
                    128400.0,
                    -0.0007824758649803698,
                    -8.01492205937393e-12,
                    0.0,
                    0x0000000000000056,
                    0x0000000000000056,
                    0x0000000000000056,
                    0x0000000000000056,
                    5,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.navigation_data_valid,
                    GNSSDecoder.navigation_data_valid,
                    -3.026798367500305e-9,
                    -3.4924596548080444e-9,
                ),
                GNSSDecoder.GalileoE1BConstants(
                    250,
                    0x0160,
                    10,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986004418e14,
                    -4.442807309e-10,
                ),
                GNSSDecoder.GalileoE1BCache(0x00000c56ffc47920fefb40147a100ff9),
                46,
                1546,
                true,
            ),
            system = galileo_e1b,
            carrier_doppler = 4055.9318556579988Hz + freq_offset,
            code_phase = 48.75149191469789,
            carrier_phase = -2.3877702498883373,
        ),
        SatelliteState(;
            decoder = GNSSDecoderState(
                11,
                uint288"0x8007b086ffe1b77000036397fde280e017a75dffa08a320100aa47ffeec2c03481373e00",
                uint288"0xd4878bc5834003d8437ff0dbb80001b1cbfef140700bd3aeffd0451900805523fff76160",
                GNSSDecoder.GalileoE1BData(
                    1136,
                    132769,
                    132000.0,
                    0.7593379982069668,
                    0.0005043556448072195,
                    5440.614900588989,
                    2.515118401165434,
                    0.9919634586882758,
                    0.7810709950849496,
                    -1.821504444400032e-11,
                    -5.659164298336962e-9,
                    2.699398155054008e-9,
                    6.221234798431396e-7,
                    2.125278115272522e-6,
                    311.3125,
                    12.25,
                    -2.9802322387695312e-8,
                    5.4016709327697754e-8,
                    132000.0,
                    0.005911215674132109,
                    -4.936850928061176e-11,
                    0.0,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    5,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.navigation_data_valid,
                    GNSSDecoder.navigation_data_valid,
                    -1.3271346688270569e-8,
                    -1.4435499906539917e-8,
                ),
                GNSSDecoder.GalileoE1BData(
                    1136,
                    132769,
                    132000.0,
                    0.7593379982069668,
                    0.0005043556448072195,
                    5440.614900588989,
                    2.515118401165434,
                    0.9919634586882758,
                    0.7810709950849496,
                    -1.821504444400032e-11,
                    -5.659164298336962e-9,
                    2.699398155054008e-9,
                    6.221234798431396e-7,
                    2.125278115272522e-6,
                    311.3125,
                    12.25,
                    -2.9802322387695312e-8,
                    5.4016709327697754e-8,
                    132000.0,
                    0.005911215674132109,
                    -4.936850928061176e-11,
                    0.0,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    5,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.navigation_data_valid,
                    GNSSDecoder.navigation_data_valid,
                    -1.3271346688270569e-8,
                    -1.4435499906539917e-8,
                ),
                GNSSDecoder.GalileoE1BConstants(
                    250,
                    0x0160,
                    10,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986004418e14,
                    -4.442807309e-10,
                ),
                GNSSDecoder.GalileoE1BCache(0x00000c5cffc21b1d86014e047526ea01),
                51,
                1551,
                false,
            ),
            system = galileo_e1b,
            carrier_doppler = 209.7024609093128Hz + freq_offset,
            code_phase = 69.54389556899758,
            carrier_phase = -1.4138935647217596,
        ),
        SatelliteState(;
            decoder = GNSSDecoderState(
                25,
                uint288"0x7fff0d5ea003cad0ffffe78900422343fd0b07400be9b7bfdf65a700010ba7f96fe9183f",
                uint288"0xd1dbd245820003ca857ff0d4bc000061dbfef772f00bd3e2ffd0592100826963fffbd160",
                GNSSDecoder.GalileoE1BData(
                    1136,
                    132769,
                    132000.0,
                    -2.0355462626837646,
                    0.00014415336772799492,
                    5440.611436843872,
                    0.42869178039052547,
                    0.9778386598651378,
                    -1.4136735049701232,
                    -3.982308736286344e-10,
                    -5.379866950195624e-9,
                    3.036555056135112e-9,
                    1.9241124391555786e-6,
                    8.305534720420837e-6,
                    172.59375,
                    40.625,
                    -7.450580596923828e-8,
                    3.3527612686157227e-8,
                    132000.0,
                    -0.000535494415089488,
                    -1.2221335055073723e-12,
                    0.0,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    5,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.navigation_data_valid,
                    GNSSDecoder.navigation_data_valid,
                    3.4924596548080444e-9,
                    3.958120942115784e-9,
                ),
                GNSSDecoder.GalileoE1BData(
                    1136,
                    132769,
                    132000.0,
                    -2.0355462626837646,
                    0.00014415336772799492,
                    5440.611436843872,
                    0.42869178039052547,
                    0.9778386598651378,
                    -1.4136735049701232,
                    -3.982308736286344e-10,
                    -5.379866950195624e-9,
                    3.036555056135112e-9,
                    1.9241124391555786e-6,
                    8.305534720420837e-6,
                    172.59375,
                    40.625,
                    -7.450580596923828e-8,
                    3.3527612686157227e-8,
                    132000.0,
                    -0.000535494415089488,
                    -1.2221335055073723e-12,
                    0.0,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    5,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.navigation_data_valid,
                    GNSSDecoder.navigation_data_valid,
                    3.4924596548080444e-9,
                    3.958120942115784e-9,
                ),
                GNSSDecoder.GalileoE1BConstants(
                    250,
                    0x0160,
                    10,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986004418e14,
                    -4.442807309e-10,
                ),
                GNSSDecoder.GalileoE1BCache(0x00000c5cffc52921360409116b159305),
                48,
                1548,
                true,
            ),
            system = galileo_e1b,
            carrier_doppler = -974.6289079820336Hz + freq_offset,
            code_phase = 1701.8894620076721,
            carrier_phase = -1.721713905186919,
        ),
        SatelliteState(;
            decoder = GNSSDecoderState(
                30,
                uint288"0xa7ff845f3001e40b7fffe54480215fd1fe85d2a005fd7cdfefff5b800197d3fcb7a08c1f",
                uint288"0xd3f0160582c003dd067ff0dfa40000d5dbfef501700bd16affd0141900800523fff34160",
                GNSSDecoder.GalileoE1BData(
                    1136,
                    132769,
                    132000.0,
                    0.43031807277213097,
                    0.00031052413396537304,
                    5440.595668792725,
                    0.43339143836728705,
                    0.9757531121479899,
                    0.869054289656611,
                    -3.9465929628667357e-10,
                    -5.42129724736237e-9,
                    3.102986394695584e-9,
                    2.089887857437134e-6,
                    8.553266525268555e-6,
                    162.5,
                    45.375,
                    8.754432201385498e-8,
                    8.195638656616211e-8,
                    132000.0,
                    0.002901351428590715,
                    -3.0667024475405924e-11,
                    0.0,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    5,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.navigation_data_valid,
                    GNSSDecoder.navigation_data_valid,
                    1.6298145055770874e-9,
                    1.6298145055770874e-9,
                ),
                GNSSDecoder.GalileoE1BData(
                    1136,
                    132769,
                    132000.0,
                    0.43031807277213097,
                    0.00031052413396537304,
                    5440.595668792725,
                    0.43339143836728705,
                    0.9757531121479899,
                    0.869054289656611,
                    -3.9465929628667357e-10,
                    -5.42129724736237e-9,
                    3.102986394695584e-9,
                    2.089887857437134e-6,
                    8.553266525268555e-6,
                    162.5,
                    45.375,
                    8.754432201385498e-8,
                    8.195638656616211e-8,
                    132000.0,
                    0.002901351428590715,
                    -3.0667024475405924e-11,
                    0.0,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    0x000000000000005c,
                    5,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.signal_ok,
                    GNSSDecoder.navigation_data_valid,
                    GNSSDecoder.navigation_data_valid,
                    1.6298145055770874e-9,
                    1.6298145055770874e-9,
                ),
                GNSSDecoder.GalileoE1BConstants(
                    250,
                    0x0160,
                    10,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986004418e14,
                    -4.442807309e-10,
                ),
                GNSSDecoder.GalileoE1BCache(0x00000c5cffc4b521f0046211f0145005),
                47,
                1547,
                true,
            ),
            system = galileo_e1b,
            carrier_doppler = 4089.415808665647Hz + freq_offset,
            code_phase = 4015.495436832823,
            carrier_phase = -2.8554107708683047,
        ),
    ]

    pvt = calc_pvt(states)
    @test get_LLA(pvt) ≈
          LLA(; lat = 50.778851672464015, lon = 6.065568885758519, alt = 289.4069805158367)
    @test pvt.time ≈ TAIEpoch(2021, 5, 31, 12, 53, 14.1183385390904732)
    @test pvt.velocity ≈ ECEF(0.0, 0.0, 0.0) atol = 9
    @test get_frequency_offset(pvt, get_center_frequency(galileo_e1b)) ≈ (1675.63Hz + freq_offset) atol = 0.01Hz
end

@testset "PVT GPS L1 with frequency offset of $freq_offset" for freq_offset in (0.0Hz, 500Hz, -1000Hz)
    gpsl1 = GPSL1()
    states = [
        SatelliteState(;
            decoder = GNSSDecoderState(
                7,
                uint320"0xe2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c07090f36c308b01c020ace4d54",
                uint320"0x0048b01c020ace2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c07090f36c308b",
                GNSSDecoder.GPSL1Data(
                    4,
                    false,
                    nothing,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0001000110",
                    false,
                    -1.1175870895385742e-8,
                    136800,
                    0.0,
                    1.0231815394945443e-11,
                    0.0001659449189901352,
                    "01000110",
                    14.90625,
                    4.9980653323400095e-9,
                    -1.5018856847786306,
                    8.065253496170044e-7,
                    0.014979799510911107,
                    6.051734089851379e-6,
                    5153.747692108154,
                    136800,
                    false,
                    31,
                    3.110617399215698e-7,
                    -0.42148546787582664,
                    -5.21540641784668e-8,
                    0.9517858648559379,
                    250.375,
                    -2.331033772387461,
                    -8.050692486513945e-9,
                    "01000110",
                    1.657211886669833e-10,
                ),
                GNSSDecoder.GPSL1Data(
                    3,
                    false,
                    132768,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0001000110",
                    false,
                    -1.1175870895385742e-8,
                    136800,
                    0.0,
                    1.0231815394945443e-11,
                    0.0001659449189901352,
                    "01000110",
                    14.90625,
                    4.9980653323400095e-9,
                    -1.5018856847786306,
                    8.065253496170044e-7,
                    0.014979799510911107,
                    6.051734089851379e-6,
                    5153.747692108154,
                    136800,
                    false,
                    31,
                    3.110617399215698e-7,
                    -0.42148546787582664,
                    -5.21540641784668e-8,
                    0.9517858648559379,
                    250.375,
                    -2.331033772387461,
                    -8.050692486513945e-9,
                    "01000110",
                    1.657211886669833e-10,
                ),
                GNSSDecoder.GPSL1Constants(
                    300,
                    0x8b,
                    8,
                    30,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986005e14,
                    -4.442807633e-10,
                ),
                GNSSDecoder.GPSL1Cache(),
                60,
                360,
                false,
            ),
            system = gpsl1,
            carrier_doppler = 2669.8440799388595Hz + freq_offset,
            code_phase = 4876.431542382193,
            carrier_phase = 0.09402551301430394,
        ),
        SatelliteState(;
            decoder = GNSSDecoderState(
                8,
                uint320"0xe2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c07090f36c308b01c020ace4d54",
                uint320"0xaf88b01c020ace2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c07090f36c308b",
                GNSSDecoder.GPSL1Data(
                    4,
                    false,
                    nothing,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0001100111",
                    false,
                    5.122274160385132e-9,
                    136800,
                    0.0,
                    -1.4779288903810084e-12,
                    -2.3324042558670044e-5,
                    "01100111",
                    84.21875,
                    4.435899058715372e-9,
                    1.3315461632138303,
                    4.639849066734314e-6,
                    0.006349898059852421,
                    6.3907355070114136e-6,
                    5153.606374740601,
                    136800,
                    false,
                    31,
                    6.891787052154541e-8,
                    1.6470055929195884,
                    7.450580596923828e-8,
                    0.9671090437449873,
                    257.125,
                    0.05450158504406715,
                    -8.087122575401946e-9,
                    "01100111",
                    -1.353627812603161e-10,
                ),
                GNSSDecoder.GPSL1Data(
                    3,
                    false,
                    132768,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0001100111",
                    false,
                    5.122274160385132e-9,
                    136800,
                    0.0,
                    -1.4779288903810084e-12,
                    -2.3324042558670044e-5,
                    "01100111",
                    84.21875,
                    4.435899058715372e-9,
                    1.3315461632138303,
                    4.639849066734314e-6,
                    0.006349898059852421,
                    6.3907355070114136e-6,
                    5153.606374740601,
                    136800,
                    false,
                    31,
                    6.891787052154541e-8,
                    1.6470055929195884,
                    7.450580596923828e-8,
                    0.9671090437449873,
                    257.125,
                    0.05450158504406715,
                    -8.087122575401946e-9,
                    "01100111",
                    -1.353627812603161e-10,
                ),
                GNSSDecoder.GPSL1Constants(
                    300,
                    0x8b,
                    8,
                    30,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986005e14,
                    -4.442807633e-10,
                ),
                GNSSDecoder.GPSL1Cache(),
                60,
                360,
                false,
            ),
            system = gpsl1,
            carrier_doppler = 4704.3549972665805Hz + freq_offset,
            code_phase = 8455.107739656896,
            carrier_phase = 2.7614518715603946,
        ),
        SatelliteState(;
            decoder = GNSSDecoderState(
                10,
                uint320"0x1d3db86b3655d4396b13e1f30d99b57860edf0be15870e004a0193f8f59c1513374fe3fdf531b2ab",
                uint320"0xdf48b01c020ace2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c070a63eaecc8b",
                GNSSDecoder.GPSL1Data(
                    4,
                    false,
                    nothing,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0000101000",
                    false,
                    2.3283064365386963e-9,
                    136800,
                    0.0,
                    -7.617018127348274e-12,
                    -0.0001329910010099411,
                    "00101000",
                    -89.25,
                    4.016595878769169e-9,
                    -2.941058160546095,
                    -4.645437002182007e-6,
                    0.006653358926996589,
                    7.499009370803833e-6,
                    5153.6786251068115,
                    136800,
                    false,
                    20,
                    -3.5390257835388184e-8,
                    -2.5268399079275254,
                    -6.146728992462158e-8,
                    0.969412731565689,
                    239.09375,
                    -2.5641372296478258,
                    -7.765323456891273e-9,
                    "00101000",
                    3.893019302737323e-11,
                ),
                GNSSDecoder.GPSL1Data(
                    3,
                    false,
                    132768,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0000101000",
                    false,
                    2.3283064365386963e-9,
                    136800,
                    0.0,
                    -7.617018127348274e-12,
                    -0.0001329910010099411,
                    "00101000",
                    -89.25,
                    4.016595878769169e-9,
                    -2.941058160546095,
                    -4.645437002182007e-6,
                    0.006653358926996589,
                    7.499009370803833e-6,
                    5153.6786251068115,
                    136800,
                    false,
                    20,
                    -3.5390257835388184e-8,
                    -2.5268399079275254,
                    -6.146728992462158e-8,
                    0.969412731565689,
                    239.09375,
                    -2.5641372296478258,
                    -7.765323456891273e-9,
                    "00101000",
                    3.893019302737323e-11,
                ),
                GNSSDecoder.GPSL1Constants(
                    300,
                    0x8b,
                    8,
                    30,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986005e14,
                    -4.442807633e-10,
                ),
                GNSSDecoder.GPSL1Cache(),
                60,
                360,
                true,
            ),
            system = gpsl1,
            carrier_doppler = 4603.179391134832Hz + freq_offset,
            code_phase = 10510.15670303955,
            carrier_phase = -0.7447786034769108,
        ),
        SatelliteState(;
            decoder = GNSSDecoderState(
                15,
                uint320"0xe2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c07084f478988b01c020ace4d54",
                uint320"0x4fc8b01c020ace2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c07084f478988b",
                GNSSDecoder.GPSL1Data(
                    4,
                    false,
                    nothing,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0001011001",
                    false,
                    -1.0710209608078003e-8,
                    136800,
                    0.0,
                    2.6147972675971687e-12,
                    -0.00014561135321855545,
                    "01011001",
                    -30.5625,
                    5.182001565450993e-9,
                    0.38753804422936994,
                    -1.471489667892456e-6,
                    0.013163934461772442,
                    9.061768651008606e-6,
                    5153.620079040527,
                    136800,
                    false,
                    31,
                    -1.695007085800171e-7,
                    -1.5933596086804434,
                    1.6205012798309326e-7,
                    0.9286304727294836,
                    190.6875,
                    0.98557755063243,
                    -8.41785063726752e-9,
                    "01011001",
                    3.010839699272994e-10,
                ),
                GNSSDecoder.GPSL1Data(
                    3,
                    false,
                    132768,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0001011001",
                    false,
                    -1.0710209608078003e-8,
                    136800,
                    0.0,
                    2.6147972675971687e-12,
                    -0.00014561135321855545,
                    "01011001",
                    -30.5625,
                    5.182001565450993e-9,
                    0.38753804422936994,
                    -1.471489667892456e-6,
                    0.013163934461772442,
                    9.061768651008606e-6,
                    5153.620079040527,
                    136800,
                    false,
                    31,
                    -1.695007085800171e-7,
                    -1.5933596086804434,
                    1.6205012798309326e-7,
                    0.9286304727294836,
                    190.6875,
                    0.98557755063243,
                    -8.41785063726752e-9,
                    "01011001",
                    3.010839699272994e-10,
                ),
                GNSSDecoder.GPSL1Constants(
                    300,
                    0x8b,
                    8,
                    30,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986005e14,
                    -4.442807633e-10,
                ),
                GNSSDecoder.GPSL1Cache(),
                60,
                360,
                false,
            ),
            system = gpsl1,
            carrier_doppler = 3144.174219887768Hz + freq_offset,
            code_phase = 3618.5099300503684,
            carrier_phase = -0.22375187424152987,
        ),
        SatelliteState(;
            decoder = GNSSDecoderState(
                16,
                uint320"0xe2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c07084f478988b01c020ace4d54",
                uint320"0x9d88b01c020ace2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c07084f478988b",
                GNSSDecoder.GPSL1Data(
                    4,
                    false,
                    nothing,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0000100010",
                    false,
                    -1.0244548320770264e-8,
                    136800,
                    0.0,
                    -6.0254023992456496e-12,
                    -0.0003338884562253952,
                    "00100010",
                    37.0,
                    4.26732060817482e-9,
                    2.20050848506247,
                    1.8272548913955688e-6,
                    0.012199128163047135,
                    9.119510650634766e-6,
                    5153.70516204834,
                    136800,
                    false,
                    22,
                    -2.3655593395233154e-7,
                    0.7074087615001045,
                    -1.30385160446167e-7,
                    0.9738089978878275,
                    212.75,
                    0.6779943621465904,
                    -7.692463279115272e-9,
                    "00100010",
                    -2.95012288445966e-10,
                ),
                GNSSDecoder.GPSL1Data(
                    3,
                    false,
                    132768,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0000100010",
                    false,
                    -1.0244548320770264e-8,
                    136800,
                    0.0,
                    -6.0254023992456496e-12,
                    -0.0003338884562253952,
                    "00100010",
                    37.0,
                    4.26732060817482e-9,
                    2.20050848506247,
                    1.8272548913955688e-6,
                    0.012199128163047135,
                    9.119510650634766e-6,
                    5153.70516204834,
                    136800,
                    false,
                    22,
                    -2.3655593395233154e-7,
                    0.7074087615001045,
                    -1.30385160446167e-7,
                    0.9738089978878275,
                    212.75,
                    0.6779943621465904,
                    -7.692463279115272e-9,
                    "00100010",
                    -2.95012288445966e-10,
                ),
                GNSSDecoder.GPSL1Constants(
                    300,
                    0x8b,
                    8,
                    30,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986005e14,
                    -4.442807633e-10,
                ),
                GNSSDecoder.GPSL1Cache(),
                60,
                360,
                false,
            ),
            system = gpsl1,
            carrier_doppler = 595.7926881306387Hz + freq_offset,
            code_phase = 17600.66651489137,
            carrier_phase = 2.59152430602131,
        ),
        SatelliteState(;
            decoder = GNSSDecoderState(
                18,
                uint320"0x1d3db86b3655d4396b13e1f30d99b57860edf0be15870e004a0193f8f729761f374fe3fdf531b2ab",
                uint320"0x9b08b01c020ace2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c0708d689e0c8b",
                GNSSDecoder.GPSL1Data(
                    4,
                    false,
                    nothing,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "1111100001",
                    false,
                    -8.381903171539307e-9,
                    136800,
                    0.0,
                    -1.3642420526593924e-12,
                    0.0003486964851617813,
                    "11100001",
                    -15.3125,
                    4.35303846438188e-9,
                    -0.6041391930737793,
                    -8.717179298400879e-7,
                    0.0014569575432687998,
                    3.339722752571106e-6,
                    5153.662895202637,
                    136800,
                    false,
                    31,
                    2.60770320892334e-8,
                    2.733796625968394,
                    -4.284083843231201e-8,
                    0.9683542210973364,
                    321.59375,
                    2.894680446328142,
                    -8.184269479103281e-9,
                    "11100001",
                    -1.0071848104329588e-10,
                ),
                GNSSDecoder.GPSL1Data(
                    3,
                    false,
                    132768,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "1111100001",
                    false,
                    -8.381903171539307e-9,
                    136800,
                    0.0,
                    -1.3642420526593924e-12,
                    0.0003486964851617813,
                    "11100001",
                    -15.3125,
                    4.35303846438188e-9,
                    -0.6041391930737793,
                    -8.717179298400879e-7,
                    0.0014569575432687998,
                    3.339722752571106e-6,
                    5153.662895202637,
                    136800,
                    false,
                    31,
                    2.60770320892334e-8,
                    2.733796625968394,
                    -4.284083843231201e-8,
                    0.9683542210973364,
                    321.59375,
                    2.894680446328142,
                    -8.184269479103281e-9,
                    "11100001",
                    -1.0071848104329588e-10,
                ),
                GNSSDecoder.GPSL1Constants(
                    300,
                    0x8b,
                    8,
                    30,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986005e14,
                    -4.442807633e-10,
                ),
                GNSSDecoder.GPSL1Cache(),
                60,
                360,
                true,
            ),
            system = gpsl1,
            carrier_doppler = -794.0022484221436Hz + freq_offset,
            code_phase = 14504.587373634655,
            carrier_phase = -0.7416765461612318,
        ),
        SatelliteState(;
            decoder = GNSSDecoderState(
                23,
                uint320"0x1d3db86b3655d4396b13e1f30d99b57860edf0be15870e004a0193f8f6f0c93cf74fe3fdf531b2ab",
                uint320"0x8fc8b01c020ace2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c07090f36c308b",
                GNSSDecoder.GPSL1Data(
                    4,
                    false,
                    nothing,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0011101110",
                    false,
                    -8.381903171539307e-9,
                    136800,
                    0.0,
                    -3.751665644813329e-12,
                    0.00010169018059968948,
                    "11101110",
                    -92.40625,
                    4.153030133232073e-9,
                    -1.3144457890174628,
                    -4.732981324195862e-6,
                    0.0012323472183197737,
                    7.256865501403809e-6,
                    5153.657176971436,
                    136800,
                    false,
                    31,
                    -9.872019290924072e-8,
                    -2.5503370450318865,
                    2.9802322387695312e-8,
                    0.9644177455387573,
                    242.5,
                    2.603874239368067,
                    -7.890328663859904e-9,
                    "11101110",
                    3.107272287505937e-11,
                ),
                GNSSDecoder.GPSL1Data(
                    3,
                    false,
                    132768,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0011101110",
                    false,
                    -8.381903171539307e-9,
                    136800,
                    0.0,
                    -3.751665644813329e-12,
                    0.00010169018059968948,
                    "11101110",
                    -92.40625,
                    4.153030133232073e-9,
                    -1.3144457890174628,
                    -4.732981324195862e-6,
                    0.0012323472183197737,
                    7.256865501403809e-6,
                    5153.657176971436,
                    136800,
                    false,
                    31,
                    -9.872019290924072e-8,
                    -2.5503370450318865,
                    2.9802322387695312e-8,
                    0.9644177455387573,
                    242.5,
                    2.603874239368067,
                    -7.890328663859904e-9,
                    "11101110",
                    3.107272287505937e-11,
                ),
                GNSSDecoder.GPSL1Constants(
                    300,
                    0x8b,
                    8,
                    30,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986005e14,
                    -4.442807633e-10,
                ),
                GNSSDecoder.GPSL1Cache(),
                60,
                360,
                true,
            ),
            system = gpsl1,
            carrier_doppler = 2826.783251528247Hz + freq_offset,
            code_phase = 14394.465193705755,
            carrier_phase = -0.7597910878699417,
        ),
        SatelliteState(;
            decoder = GNSSDecoderState(
                26,
                uint320"0x1d3db86b3655d4396b13e1f30d99b57860edf0be15870e004a0193f8f729761f374fe3fdf531b2ab",
                uint320"0x3ac8b01c020ace2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c0708d689e0c8b",
                GNSSDecoder.GPSL1Data(
                    4,
                    false,
                    nothing,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0001101110",
                    false,
                    6.984919309616089e-9,
                    136800,
                    0.0,
                    4.888534022029489e-12,
                    9.242305532097816e-5,
                    "01101110",
                    29.53125,
                    5.002351225150362e-9,
                    3.0615288470223163,
                    1.5329569578170776e-6,
                    0.00589060562197119,
                    8.42846930027008e-6,
                    5153.568691253662,
                    136800,
                    false,
                    31,
                    -1.043081283569336e-7,
                    0.5730118600154152,
                    1.30385160446167e-8,
                    0.942073253292395,
                    208.875,
                    0.3072108597425673,
                    -8.057478483463671e-9,
                    "01101110",
                    -3.328710082707509e-10,
                ),
                GNSSDecoder.GPSL1Data(
                    3,
                    false,
                    132768,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0001101110",
                    false,
                    6.984919309616089e-9,
                    136800,
                    0.0,
                    4.888534022029489e-12,
                    9.242305532097816e-5,
                    "01101110",
                    29.53125,
                    5.002351225150362e-9,
                    3.0615288470223163,
                    1.5329569578170776e-6,
                    0.00589060562197119,
                    8.42846930027008e-6,
                    5153.568691253662,
                    136800,
                    false,
                    31,
                    -1.043081283569336e-7,
                    0.5730118600154152,
                    1.30385160446167e-8,
                    0.942073253292395,
                    208.875,
                    0.3072108597425673,
                    -8.057478483463671e-9,
                    "01101110",
                    -3.328710082707509e-10,
                ),
                GNSSDecoder.GPSL1Constants(
                    300,
                    0x8b,
                    8,
                    30,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986005e14,
                    -4.442807633e-10,
                ),
                GNSSDecoder.GPSL1Cache(),
                60,
                360,
                true,
            ),
            system = gpsl1,
            carrier_doppler = -1083.2317687377372Hz + freq_offset,
            code_phase = 13905.233170289455,
            carrier_phase = -2.1444956909602526,
        ),
        SatelliteState(;
            decoder = GNSSDecoderState(
                27,
                uint320"0xe2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c070a63eaecc8b01c020ace4d54",
                uint320"0x75c8b01c020ace2c24794c9aa2bc694ec1e0cf2664a879f120f41ea78f1ffb5fe6c070a63eaecc8b",
                GNSSDecoder.GPSL1Data(
                    4,
                    false,
                    nothing,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0001001110",
                    false,
                    1.862645149230957e-9,
                    136800,
                    0.0,
                    -6.366462912410498e-12,
                    -0.0001393994316458702,
                    "01001110",
                    82.25,
                    4.257677349351526e-9,
                    1.25128819523303,
                    4.505738615989685e-6,
                    0.00944566575344652,
                    6.81169331073761e-6,
                    5153.686637878418,
                    136800,
                    false,
                    31,
                    -5.029141902923584e-8,
                    1.66429757866306,
                    1.601874828338623e-7,
                    0.9756900633046096,
                    257.375,
                    0.6281523291801417,
                    -8.07676500111026e-9,
                    "01001110",
                    -1.2286226056345314e-10,
                ),
                GNSSDecoder.GPSL1Data(
                    3,
                    false,
                    132768,
                    false,
                    true,
                    112,
                    1,
                    2.0,
                    "000000",
                    "0001001110",
                    false,
                    1.862645149230957e-9,
                    136800,
                    0.0,
                    -6.366462912410498e-12,
                    -0.0001393994316458702,
                    "01001110",
                    82.25,
                    4.257677349351526e-9,
                    1.25128819523303,
                    4.505738615989685e-6,
                    0.00944566575344652,
                    6.81169331073761e-6,
                    5153.686637878418,
                    136800,
                    false,
                    31,
                    -5.029141902923584e-8,
                    1.66429757866306,
                    1.601874828338623e-7,
                    0.9756900633046096,
                    257.375,
                    0.6281523291801417,
                    -8.07676500111026e-9,
                    "01001110",
                    -1.2286226056345314e-10,
                ),
                GNSSDecoder.GPSL1Constants(
                    300,
                    0x8b,
                    8,
                    30,
                    3.1415926535898,
                    7.2921151467e-5,
                    2.99792458e8,
                    3.986005e14,
                    -4.442807633e-10,
                ),
                GNSSDecoder.GPSL1Cache(),
                60,
                360,
                false,
            ),
            system = gpsl1,
            carrier_doppler = 3393.7445379085816Hz + freq_offset,
            code_phase = 16861.02713837273,
            carrier_phase = -0.9185401811870872,
        ),
    ]

    pvt = calc_pvt(states)
    @test get_LLA(pvt) ≈
          LLA(; lat = 50.77885249310784, lon = 6.0656199911189175, alt = 291.95658091689086)
    @test pvt.time ≈ TAIEpoch(2021, 5, 31, 12, 53, 14.1491024351271335)
    @test pvt.velocity ≈ ECEF(0.0, 0.0, 0.0) atol = 2.5
    @test get_frequency_offset(pvt, get_center_frequency(gpsl1)) ≈ (1632.59Hz + freq_offset) atol = 0.01Hz
end